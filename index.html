<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LearnMate - Your Learning Partner</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* === LOADING SPINNER === */
        .loading-spinner {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255,255,255,0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #007bff;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* === DARK MODE === */
        .dark-mode-toggle {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            padding: 10px;
            margin-left: 15px;
        }

        .dark-mode {
            background: #1a1a1a;
            color: #ffffff;
        }

        .dark-mode .navbar {
            background: #2d2d2d;
            border-bottom: 1px solid #444;
        }

        .dark-mode .course-card {
            background: #2d2d2d;
            color: white;
            border: 1px solid #444;
        }

        .dark-mode .hero {
            background: linear-gradient(135deg, #2d2d2d, #1a1a1a);
        }

        .dark-mode .contact-form input,
        .dark-mode .contact-form textarea {
            background: #2d2d2d;
            color: white;
            border: 1px solid #444;
        }

        /* === SEARCH FUNCTIONALITY === */
        .search-container {
            display: flex;
            max-width: 500px;
            margin: 20px auto 40px;
        }

        .search-input {
            flex: 1;
            padding: 12px 20px;
            border: 2px solid #007bff;
            border-radius: 25px 0 0 25px;
            font-size: 16px;
            outline: none;
        }

        .search-btn {
            padding: 12px 25px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 0 25px 25px 0;
            cursor: pointer;
            font-size: 16px;
        }

        /* === PROGRESS TRACKING === */
        .progress-section {
            margin: 30px 0;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 15px;
            border-left: 5px solid #007bff;
        }

        .dark-mode .progress-section {
            background: #2d2d2d;
        }

        .progress-item {
            margin: 20px 0;
            padding: 15px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .dark-mode .progress-item {
            background: #363636;
        }

        .progress-bar {
            width: 100%;
            height: 12px;
            background: #e9ecef;
            border-radius: 6px;
            overflow: hidden;
            margin: 10px 0;
        }

        .dark-mode .progress-bar {
            background: #444;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #28a745, #20c997);
            transition: width 0.5s ease;
            border-radius: 6px;
        }

        /* === NOTIFICATIONS === */
        .notification-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 10000;
        }

        .notification {
            background: #28a745;
            color: white;
            padding: 15px 25px;
            margin: 10px 0;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            animation: slideInRight 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .notification.error {
            background: #dc3545;
        }

        .notification.warning {
            background: #ffc107;
            color: #212529;
        }

        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        /* === COURSE RATINGS === */
        .rating-section {
            margin: 20px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            text-align: center;
        }

        .dark-mode .rating-section {
            background: #2d2d2d;
        }

        .stars {
            font-size: 24px;
            cursor: pointer;
            margin: 10px 0;
        }

        .stars span {
            margin: 0 2px;
            transition: color 0.2s ease;
        }

        /* === FILTERS === */
        .filter-container {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin: 20px 0 30px;
            flex-wrap: wrap;
        }

        .filter-select {
            padding: 10px 15px;
            border: 2px solid #007bff;
            border-radius: 8px;
            background: white;
            font-size: 14px;
            cursor: pointer;
        }

        .dark-mode .filter-select {
            background: #2d2d2d;
            color: white;
            border-color: #555;
        }

        /* === WHATSAPP INTEGRATION === */
        .whatsapp-float {
            position: fixed;
            bottom: 25px;
            right: 25px;
            background: #25D366;
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 30px;
            text-decoration: none;
            box-shadow: 0 4px 15px rgba(37, 211, 102, 0.4);
            z-index: 1000;
            transition: all 0.3s ease;
        }

        .whatsapp-float:hover {
            transform: scale(1.1);
            background: #128C7E;
            box-shadow: 0 6px 20px rgba(37, 211, 102, 0.6);
        }

        .whatsapp-course-btn {
            background: #25D366;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
            font-size: 12px;
            transition: all 0.3s ease;
        }

        .whatsapp-course-btn:hover {
            background: #128C7E;
        }

        /* === INSTALL APP BUTTON === */
        .install-btn {
            background: #6f42c1;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            margin-left: 15px;
            font-size: 14px;
        }

        /* === SKIP LINK === */
        .skip-link {
            position: absolute;
            top: -40px;
            left: 6px;
            background: #007bff;
            color: white;
            padding: 8px 15px;
            text-decoration: none;
            border-radius: 4px;
            z-index: 10000;
        }

        .skip-link:focus {
            top: 6px;
        }

        /* === AUTH MODAL === */
        .auth-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .auth-modal {
            background: white;
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .dark-mode .auth-modal {
            background: #2d2d2d;
            color: white;
        }

        .auth-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            border-bottom: 2px solid #007bff;
            padding-bottom: 15px;
        }

        .auth-modal-header h2 {
            margin: 0;
            color: #333;
        }

        .dark-mode .auth-modal-header h2 {
            color: white;
        }

        .close-auth-btn {
            font-size: 24px;
            cursor: pointer;
            color: #666;
            background: none;
            border: none;
        }

        .close-auth-btn:hover {
            color: #333;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #333;
        }

        .dark-mode .form-group label {
            color: white;
        }

        .form-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            box-sizing: border-box;
            transition: border-color 0.3s ease;
        }

        .dark-mode .form-group input {
            background: #363636;
            color: white;
            border-color: #555;
        }

        .form-group input:focus {
            border-color: #007bff;
            outline: none;
        }

        .auth-submit-btn {
            width: 100%;
            padding: 15px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            margin-top: 10px;
            transition: background 0.3s ease;
        }

        .auth-submit-btn:hover {
            background: #0056b3;
        }

        .auth-switch {
            text-align: center;
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid #eee;
        }

        .dark-mode .auth-switch {
            border-color: #555;
        }

        .auth-switch a {
            color: #007bff;
            text-decoration: none;
            font-weight: bold;
        }

        .auth-switch a:hover {
            text-decoration: underline;
        }

        /* === NAVIGATION AUTH === */
        .nav-auth {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .btn-login, .btn-signup, .btn-logout {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .btn-login {
            background: transparent;
            border: 2px solid #007bff;
            color: #007bff;
        }

        .btn-login:hover {
            background: #007bff;
            color: white;
        }

        .btn-signup {
            background: #007bff;
            color: white;
        }

        .btn-signup:hover {
            background: #0056b3;
        }

        .btn-logout {
            background: #dc3545;
            color: white;
        }

        .btn-logout:hover {
            background: #c82333;
        }

        .user-welcome {
            font-weight: bold;
            color: #333;
            margin-right: 10px;
        }

        .dark-mode .user-welcome {
            color: white;
        }

        .user-courses {
            background: #28a745;
            color: white;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            margin-right: 10px;
        }

        /* === MODULE POPUP === */
        .module-popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }

        .module-popup {
            background: white;
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .dark-mode .module-popup {
            background: #2d2d2d;
            color: white;
        }

        .module-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            border-bottom: 3px solid #007bff;
            padding-bottom: 15px;
        }

        .module-header h2 {
            margin: 0;
            color: #007bff;
            font-size: 28px;
        }

        .close-module-btn {
            font-size: 30px;
            cursor: pointer;
            color: #666;
            background: none;
            border: none;
        }

        .close-module-btn:hover {
            color: #333;
        }

        .module-content {
            line-height: 1.6;
        }

        .module-section {
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid #007bff;
        }

        .dark-mode .module-section {
            background: #363636;
        }

        .module-section h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 20px;
        }

        .dark-mode .module-section h3 {
            color: white;
        }

        .module-section p {
            color: #555;
            margin-bottom: 10px;
        }

        .dark-mode .module-section p {
            color: #ccc;
        }

        .code-example {
            background: #2d2d2d;
            color: #f8f9fa;
            border: 1px solid #444;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            white-space: pre-wrap;
            overflow-x: auto;
        }

        .module-features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .feature-item {
            background: #e7f3ff;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #007bff;
            text-align: center;
        }

        .dark-mode .feature-item {
            background: #363636;
        }

        .next-module-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 20px;
            transition: background 0.3s ease;
        }

        .next-module-btn:hover {
            background: #218838;
        }

        /* === COURSE POPUP === */
        .course-popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1500;
        }

        .course-popup {
            background: white;
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
        }

        .dark-mode .course-popup {
            background: #2d2d2d;
            color: white;
        }

        .popup-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            border-bottom: 2px solid #007bff;
            padding-bottom: 15px;
        }

        .popup-header h2 {
            margin: 0;
            color: #007bff;
        }

        .close-btn {
            font-size: 24px;
            cursor: pointer;
            color: #666;
            background: none;
            border: none;
        }

        .course-price-popup {
            font-size: 24px;
            font-weight: bold;
            color: #28a745;
            margin: 10px 0;
        }

        .popup-actions {
            display: flex;
            gap: 15px;
            margin-top: 25px;
        }

        .enroll-btn-popup {
            flex: 1;
            padding: 15px;
            background: #28a745;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
        }

        .close-btn-popup {
            flex: 1;
            padding: 15px;
            background: #6c757d;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
        }

        /* === HIGHLIGHT ANIMATION === */
        @keyframes highlight {
            0% { background-color: transparent; }
            50% { background-color: #fff3cd; }
            100% { background-color: transparent; }
        }

        .dark-mode .highlight {
            animation: highlightDark 1s;
        }

        @keyframes highlightDark {
            0% { background-color: transparent; }
            50% { background-color: #4a5568; }
            100% { background-color: transparent; }
        }

        /* === MATEBOT AI ASSISTANT === */
        .matebot-container {
            position: fixed;
            bottom: 100px;
            right: 25px;
            width: 400px;
            height: 600px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .dark-mode .matebot-container {
            background: #2d2d2d;
            color: white;
        }

        .matebot-header {
            background: linear-gradient(135deg, #007bff, #0056b3);
            color: white;
            padding: 15px 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            border-bottom: 2px solid #0056b3;
        }

        .matebot-avatar {
            width: 40px;
            height: 40px;
            background: #28a745;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 18px;
        }

        .matebot-status {
            font-size: 12px;
            opacity: 0.9;
        }

        .matebot-messages {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 10px;
            background: #f8f9fa;
        }

        .dark-mode .matebot-messages {
            background: #363636;
        }

        .matebot-message {
            max-width: 85%;
            padding: 10px 15px;
            border-radius: 15px;
            line-height: 1.4;
            font-size: 14px;
        }

        .user-message {
            align-self: flex-end;
            background: #007bff;
            color: white;
            border-bottom-right-radius: 5px;
        }

        .bot-message {
            align-self: flex-start;
            background: white;
            color: #333;
            border: 1px solid #e0e0e0;
            border-bottom-left-radius: 5px;
        }

        .dark-mode .bot-message {
            background: #2d2d2d;
            color: white;
            border-color: #444;
        }

        .matebot-typing {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 10px 15px;
            background: white;
            border-radius: 15px;
            border-bottom-left-radius: 5px;
            align-self: flex-start;
        }

        .dark-mode .matebot-typing {
            background: #2d2d2d;
        }

        .typing-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background-color: #999;
            animation: typingAnimation 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(1) { animation-delay: 0s; }
        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typingAnimation {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-5px); }
        }

        .matebot-input-container {
            display: flex;
            padding: 15px;
            border-top: 1px solid #e0e0e0;
            background: white;
        }

        .dark-mode .matebot-input-container {
            background: #2d2d2d;
            border-color: #444;
        }

        .matebot-input {
            flex: 1;
            padding: 10px 15px;
            border: 1px solid #ddd;
            border-radius: 20px;
            outline: none;
            font-size: 14px;
            transition: border-color 0.3s;
        }

        .dark-mode .matebot-input {
            background: #363636;
            color: white;
            border-color: #555;
        }

        .matebot-input:focus {
            border-color: #007bff;
        }

        .matebot-send-btn {
            background: #007bff;
            color: white;
            border: none;
            border-radius: 50%;
            width: 36px;
            height: 36px;
            margin-left: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.3s;
        }

        .matebot-send-btn:hover {
            background: #0056b3;
        }

        .matebot-quick-actions {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            padding: 10px 15px;
            background: #f8f9fa;
            border-top: 1px solid #e0e0e0;
        }

        .dark-mode .matebot-quick-actions {
            background: #363636;
            border-color: #444;
        }

        .matebot-quick-action {
            background: #e7f3ff;
            color: #007bff;
            border: none;
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .dark-mode .matebot-quick-action {
            background: #363636;
            color: #4da8ff;
            border: 1px solid #555;
        }

        .matebot-quick-action:hover {
            background: #007bff;
            color: white;
        }

        .matebot-toggle {
            position: fixed;
            bottom: 25px;
            right: 100px;
            background: #007bff;
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0, 123, 255, 0.4);
            z-index: 1000;
            transition: all 0.3s ease;
            border: none;
        }

        .matebot-toggle:hover {
            transform: scale(1.1);
            background: #0056b3;
            box-shadow: 0 6px 20px rgba(0, 123, 255, 0.6);
        }

        .matebot-hidden {
            transform: translateY(100%);
            opacity: 0;
            pointer-events: none;
        }

        .api-key-section {
            padding: 10px 15px;
            background: #fff3cd;
            border-bottom: 1px solid #ffeaa7;
        }

        .dark-mode .api-key-section {
            background: #444;
            border-color: #555;
        }

        .api-key-input {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 12px;
            margin-bottom: 5px;
        }

        .save-api-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 3px;
            font-size: 11px;
            cursor: pointer;
        }

        .powered-by {
            font-size: 10px;
            opacity: 0.7;
            text-align: center;
            padding: 5px;
        }
    </style>
</head>
<body>
    <!-- Loading Spinner -->
    <div id="loadingSpinner" class="loading-spinner" style="display: none;">
        <div class="spinner"></div>
    </div>

    <!-- Skip Link -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">
                <h2>LearnMate</h2>
            </div>
            <ul class="nav-menu">
                <li><a href="#home">Home</a></li>
                <li><a href="#courses">Courses</a></li>
                <li><a href="#about">About</a></li>
                <li><a href="#contact">Contact</a></li>
                <!-- Auth Section -->
                <div class="nav-auth">
                    <!-- Dark Mode Toggle -->
                    <button id="darkModeToggle" class="dark-mode-toggle">🌙</button>
                    
                    <!-- Install App Button -->
                    <button id="installBtn" class="install-btn" style="display: none;">📱 Install App</button>
                    
                    <!-- Login/Signup Buttons -->
                    <div id="authSection">
                        <button class="btn-login" onclick="authSystem.showAuthModal('login')">Login</button>
                        <button class="btn-signup" onclick="authSystem.showAuthModal('signup')">Sign Up</button>
                    </div>
                    
                    <!-- User Info -->
                    <div id="userSection" style="display: none;">
                        <span class="user-welcome">Welcome, <span id="userName"></span>!</span>
                        <span class="user-courses">Courses: <span id="enrolledCoursesCount">0</span></span>
                        <button class="btn-logout" onclick="logout()">Logout</button>
                    </div>
                </div>
            </ul>
        </div>
    </nav>

    <!-- Main Content -->
    <main id="main-content">
        <!-- Hero Section -->
        <section id="home" class="hero">
            <div class="hero-content">
                <h1>Welcome to LearnMate</h1>
                <p>India's most trusted educational platform for safe and secure learning</p>
                <button class="cta-button" onclick="scrollToCourses()">Start Learning Today</button>
            </div>
        </section>

        <!-- Courses Section -->
        <section id="courses" class="courses">
            <div class="container">
                <h2>Our Popular Courses</h2>
                
                <!-- Search and Filters -->
                <div class="search-container">
                    <input type="text" id="courseSearch" placeholder="Search courses..." class="search-input">
                    <button onclick="searchCourses()" class="search-btn">🔍 Search</button>
                </div>

                <div class="filter-container">
                    <select id="levelFilter" class="filter-select" onchange="filterCourses()">
                        <option value="all">All Levels</option>
                        <option value="beginner">Beginner</option>
                        <option value="intermediate">Intermediate</option>
                        <option value="advanced">Advanced</option>
                    </select>
                    
                    <select id="priceFilter" class="filter-select" onchange="filterCourses()">
                        <option value="all">All Prices</option>
                        <option value="free">Free</option>
                        <option value="paid">Paid</option>
                    </select>

                    <select id="durationFilter" class="filter-select" onchange="filterCourses()">
                        <option value="all">Any Duration</option>
                        <option value="short">Short (1-4 weeks)</option>
                        <option value="medium">Medium (5-8 weeks)</option>
                        <option value="long">Long (9+ weeks)</option>
                    </select>
                </div>

                <!-- Progress Section -->
                <div class="progress-section" id="progressSection" style="display: none;">
                    <h3>📊 Your Learning Progress</h3>
                    <div id="progressContainer"></div>
                </div>

                <!-- Course Grid -->
                <div class="course-grid" id="courseGrid">
                    <!-- Courses will be dynamically loaded -->
                </div>
            </div>
        </section>

        <!-- About Section -->
        <section id="about" class="about">
            <div class="container">
                <h2>About LearnMate</h2>
                <p>LearnMate is a safe and secure educational platform designed for Indian students. We provide quality education with 100% privacy protection.</p>
                <div class="features">
                    <div class="feature">✅ Safe & Secure</div>
                    <div class="feature">✅ Expert Teachers</div>
                    <div class="feature">✅ 24/7 Support</div>
                    <div class="feature">✅ Certificate</div>
                    <div class="feature">✅ Affordable</div>
                </div>
            </div>
        </section>

        <!-- Contact Section -->
        <section id="contact" class="contact">
            <div class="container">
                <h2>Contact Us</h2>
                <form class="contact-form">
                    <input type="text" placeholder="Your Name" required>
                    <input type="email" placeholder="Your Email" required>
                    <textarea placeholder="Your Message" rows="5" required></textarea>
                    <button type="submit">Send Message</button>
                </form>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2024 LearnMate. All rights reserved. | 
               <a href="#">Privacy Policy</a> | 
               <a href="#">Terms of Service</a></p>
        </div>
    </footer>

    <!-- Notifications Container -->
    <div id="notificationContainer" class="notification-container"></div>

    <!-- WhatsApp Float -->
    <a href="https://wa.me/918960002095?text=Hi, I'm interested in LearnMate courses" 
       class="whatsapp-float" 
       target="_blank"
       title="Contact us on WhatsApp">
       💬
    </a>

    <!-- MateBot AI Assistant -->
    <button class="matebot-toggle" id="matebotToggle" title="Chat with MateBot">
        🤖
    </button>

    <div class="matebot-container matebot-hidden" id="matebotContainer">
        <div class="matebot-header">
            <div class="matebot-avatar">MB</div>
            <div>
                <h3 style="margin: 0; font-size: 16px;">MateBot AI</h3>
                <div class="matebot-status">Online • Powered by Google Gemini</div>
            </div>
        </div>
        
        <!-- API Key Section -->
        <div class="api-key-section">
            <input type="password" 
                   class="api-key-input" 
                   id="geminiApiKey" 
                   placeholder="Enter your Google Gemini API Key"
                   value="">
            <button class="save-api-btn" onclick="saveApiKey()">Save Key</button>
            <div class="powered-by">Get free API key from: <a href="https://aistudio.google.com/" target="_blank">Google AI Studio</a></div>
        </div>
        
        <div class="matebot-messages" id="matebotMessages">
            <div class="matebot-message bot-message">
                🚀 <strong>Welcome to MateBot AI!</strong><br><br>
                I'm powered by Google Gemini and can help you with:<br>
                • Study questions & homework<br>
                • Course recommendations<br>
                • Coding problems<br>
                • Science & math explanations<br>
                • Business & career advice<br>
                • And much more!<br><br>
                <em>First, please enter your Google Gemini API key above to start chatting!</em>
            </div>
        </div>
        
        <div class="matebot-quick-actions">
            <button class="matebot-quick-action" data-question="Explain quantum physics in simple terms">Quantum Physics</button>
            <button class="matebot-quick-action" data-question="How to learn coding faster?">Coding Tips</button>
            <button class="matebot-quick-action" data-question="What is machine learning?">ML Basics</button>
            <button class="matebot-quick-action" data-question="Help me with algebra homework">Math Help</button>
        </div>
        
        <div class="matebot-input-container">
            <input type="text" class="matebot-input" id="matebotInput" placeholder="Ask me anything...">
            <button class="matebot-send-btn" id="matebotSend">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="22" y1="2" x2="11" y2="13"></line>
                    <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                </svg>
            </button>
        </div>
    </div>

    <script>
        // ===== GOOGLE GEMINI AI INTEGRATION - UPDATED FIXED VERSION =====
        const geminiAI = {
            apiKey: localStorage.getItem('geminiApiKey') || '',
            
            // ✅ UPDATED WORKING API ENDPOINT
            baseURL: 'https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent',

            setApiKey: function(key) {
                this.apiKey = key;
                localStorage.setItem('geminiApiKey', key);
            },

            getApiKey: function() {
                return this.apiKey;
            },

            async generateResponse(userMessage) {
                if (!this.apiKey) {
                    throw new Error('Please enter your Google Gemini API key first! Get it from: https://aistudio.google.com/');
                }

                const response = await fetch(`${this.baseURL}?key=${this.apiKey}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{
                                text: `You are MateBot, a helpful AI assistant for LearnMate educational platform. 
                                User is asking: "${userMessage}"
                                
                                Provide a comprehensive, helpful response in a friendly tone. 
                                If it's related to education, learning, or courses, provide additional guidance.
                                Keep responses clear and well-structured.`
                            }]
                        }]
                    })
                });

                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.error?.message || 'API request failed');
                }

                const data = await response.json();
                return data.candidates[0].content.parts[0].text;
            }
        };

        // ===== MATEBOT AI ASSISTANT - UPDATED =====
        const mateBot = {
            isVisible: false,
            messages: [],

            init: function() {
                this.bindEvents();
                this.loadMessages();
                this.loadApiKey();
            },

            bindEvents: function() {
                const toggleBtn = document.getElementById('matebotToggle');
                const sendBtn = document.getElementById('matebotSend');
                const input = document.getElementById('matebotInput');
                const quickActions = document.querySelectorAll('.matebot-quick-action');

                toggleBtn.addEventListener('click', () => this.toggle());
                sendBtn.addEventListener('click', () => this.sendMessage());
                input.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') this.sendMessage();
                });

                quickActions.forEach(button => {
                    button.addEventListener('click', (e) => {
                        const question = e.target.getAttribute('data-question');
                        document.getElementById('matebotInput').value = question;
                        this.sendMessage();
                    });
                });
            },

            loadApiKey: function() {
                const savedKey = geminiAI.getApiKey();
                if (savedKey) {
                    document.getElementById('geminiApiKey').value = savedKey;
                }
            },

            toggle: function() {
                const container = document.getElementById('matebotContainer');
                this.isVisible = !this.isVisible;
                
                if (this.isVisible) {
                    container.classList.remove('matebot-hidden');
                    document.getElementById('matebotInput').focus();
                    trackEvent('matebot', 'open_chat', 'user');
                } else {
                    container.classList.add('matebot-hidden');
                }
            },

            async sendMessage() {
                const input = document.getElementById('matebotInput');
                const message = input.value.trim();
                
                if (!message) return;

                this.addMessage(message, 'user');
                input.value = '';
                this.showTypingIndicator();
                
                try {
                    const response = await geminiAI.generateResponse(message);
                    this.removeTypingIndicator();
                    this.addMessage(response, 'bot');
                    trackEvent('matebot', 'send_message', 'gemini_success');
                } catch (error) {
                    this.removeTypingIndicator();
                    this.addMessage(`❌ Error: ${error.message}`, 'bot');
                    trackEvent('matebot', 'send_message', 'gemini_error');
                }
            },

            addMessage: function(text, sender) {
                const messagesContainer = document.getElementById('matebotMessages');
                const messageDiv = document.createElement('div');
                messageDiv.className = `matebot-message ${sender}-message`;
                messageDiv.innerHTML = text.replace(/\n/g, '<br>');
                
                messagesContainer.appendChild(messageDiv);
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
                
                this.messages.push({ text, sender, timestamp: new Date() });
                this.saveMessages();
            },

            showTypingIndicator: function() {
                const messagesContainer = document.getElementById('matebotMessages');
                const typingDiv = document.createElement('div');
                typingDiv.className = 'matebot-typing';
                typingDiv.id = 'typingIndicator';
                typingDiv.innerHTML = `
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                `;
                
                messagesContainer.appendChild(typingDiv);
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
            },

            removeTypingIndicator: function() {
                const typingIndicator = document.getElementById('typingIndicator');
                if (typingIndicator) {
                    typingIndicator.remove();
                }
            },

            saveMessages: function() {
                if (this.messages.length > 50) {
                    this.messages = this.messages.slice(-50);
                }
                localStorage.setItem('matebotMessages', JSON.stringify(this.messages));
            },

            loadMessages: function() {
                const saved = localStorage.getItem('matebotMessages');
                if (saved) {
                    this.messages = JSON.parse(saved);
                    this.messages.forEach(msg => {
                        this.addMessage(msg.text, msg.sender);
                    });
                }
            }
        };

        // ===== API KEY MANAGEMENT =====
        function saveApiKey() {
            const apiKeyInput = document.getElementById('geminiApiKey');
            const apiKey = apiKeyInput.value.trim();
            
            if (!apiKey) {
                showNotification('Please enter a valid API key', 'error');
                return;
            }

            geminiAI.setApiKey(apiKey);
            showNotification('API key saved successfully!');
            
            // Test the API key
            mateBot.addMessage('🔐 API key saved! Testing connection...', 'bot');
            setTimeout(async () => {
                try {
                    await geminiAI.generateResponse('Hello');
                    mateBot.addMessage('✅ Connection successful! You can now ask me anything!', 'bot');
                } catch (error) {
                    mateBot.addMessage(`❌ Connection failed: ${error.message}`, 'bot');
                }
            }, 1000);
        }

        // ===== COURSE DATA =====
        const coursesData = {
            'web-development': {
                title: 'Web Development Master Course',
                price: 'Free',
                description: 'Complete web development course covering HTML, CSS, JavaScript from basics to advanced level. Build real-world projects and become a professional web developer.',
                modules: [
                    {
                        name: 'HTML5 & Semantic HTML',
                        description: 'Learn modern HTML5 tags, semantic structure, forms, tables and SEO-friendly coding practices.',
                        content: {
                            overview: 'HTML5 is the latest version of HyperText Markup Language, the code that describes web pages. It provides better structure and semantic elements for modern web development.',
                            topics: [
                                'HTML5 Document Structure',
                                'Semantic Elements (header, nav, section, article, footer)',
                                'Forms and Input Types',
                                'Multimedia (audio, video)',
                                'Canvas and SVG',
                                'Web Storage APIs'
                            ],
                            codeExample: `<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>My Web Page</title>
</head>
<body>
    <header>
        <h1>Welcome to My Website</h1>
    </header>
    <nav>
        <a href="#home">Home</a>
        <a href="#about">About</a>
    </nav>
    <main>
        <article>
            <h2>Article Title</h2>
            <p>This is article content.</p>
        </article>
    </main>
</body>
</html>`,
                            features: [
                                'Better page structure',
                                'Improved accessibility',
                                'Mobile-friendly',
                                'Offline capabilities',
                                'Multimedia support'
                            ]
                        }
                    }
                ],
                duration: '8 Weeks',
                level: 'Beginner'
            },
            'python': {
                title: 'Python Programming',
                price: '₹499',
                description: 'Learn Python from scratch to advanced level with practical projects.',
                modules: [
                    {
                        name: 'Python Basics & Syntax',
                        description: 'Master Python fundamentals, syntax, and basic programming concepts.',
                        content: {
                            overview: 'Python is a versatile, beginner-friendly programming language known for its clean syntax and readability. Perfect for beginners and professionals alike.',
                            topics: [
                                'Variables and Data Types',
                                'Operators and Expressions',
                                'Control Structures (if-else, loops)',
                                'Functions and Modules',
                                'Basic Input/Output',
                                'Error Handling'
                            ],
                            codeExample: `# Basic Python Syntax
name = "Alice"
age = 25

# Conditional statement
if age >= 18:
    print(f"{name} is an adult")
else:
    print(f"{name} is a minor")

# Function definition
def greet(name):
    return f"Hello, {name}!"

# List comprehension
numbers = [1, 2, 3, 4, 5]
squares = [x**2 for x in numbers]`,
                            features: [
                                'Easy to learn syntax',
                                'Versatile applications',
                                'Large standard library',
                                'Cross-platform compatibility',
                                'Strong community support'
                            ]
                        }
                    }
                ],
                duration: '6 Weeks',
                level: 'Beginner'
            },
            'digital-marketing': {
                title: 'Digital Marketing',
                price: '₹799',
                description: 'Master SEO, Social Media Marketing, Google Ads and more.',
                modules: [
                    {
                        name: 'SEO Fundamentals',
                        description: 'Learn Search Engine Optimization techniques to rank higher in search results.',
                        content: {
                            overview: 'SEO is the practice of optimizing websites to rank higher in search engine results pages, driving organic traffic and visibility.',
                            topics: [
                                'Keyword Research and Analysis',
                                'On-Page SEO Techniques',
                                'Off-Page SEO and Link Building',
                                'Technical SEO',
                                'Local SEO Strategies',
                                'SEO Analytics and Reporting'
                            ],
                            codeExample: `<!-- SEO Optimized HTML Structure -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="description" content="Learn digital marketing with expert courses">
    <meta name="keywords" content="digital marketing, SEO, social media">
    <title>Digital Marketing Course - Learn SEO & Social Media</title>
</head>
<body>
    <header>
        <h1>Digital Marketing Master Course</h1>
    </header>
</body>
</html>`,
                            features: [
                                'Higher search rankings',
                                'Increased organic traffic',
                                'Better user experience',
                                'Long-term results',
                                'Cost-effective marketing'
                            ]
                        }
                    }
                ],
                duration: '4 Weeks',
                level: 'Intermediate'
            },
            'mathematics': {
                title: 'Mathematics Class 10',
                price: '₹299',
                description: 'Complete CBSE syllabus with expert teachers and practice problems.',
                modules: [
                    {
                        name: 'Real Numbers',
                        description: 'Master fundamental concepts of real numbers and their properties.',
                        content: {
                            overview: 'Real numbers form the foundation of mathematics, including rational, irrational numbers and their applications in problem-solving.',
                            topics: [
                                'Euclid\'s Division Lemma',
                                'Fundamental Theorem of Arithmetic',
                                'Rational and Irrational Numbers',
                                'Decimal Expansions',
                                'HCF and LCM',
                                'Word Problems'
                            ],
                            codeExample: `Example Problem:
Find the HCF of 135 and 225 using Euclid's division algorithm.

Solution:
225 = 135 × 1 + 90
135 = 90 × 1 + 45
90 = 45 × 2 + 0

∴ HCF = 45

Verification:
135 ÷ 45 = 3
225 ÷ 45 = 5`,
                            features: [
                                'Strong foundation',
                                'Problem-solving skills',
                                'Exam preparation',
                                'Concept clarity',
                                'Practical applications'
                            ]
                        }
                    }
                ],
                duration: '12 Weeks',
                level: 'Class 10'
            },
            'english-speaking': {
                title: 'English Speaking',
                price: '₹599',
                description: 'Fluency in 30 days with daily practice sessions.',
                modules: [
                    {
                        name: 'Basic Grammar',
                        description: 'Master essential English grammar rules and sentence structures.',
                        content: {
                            overview: 'Strong grammar foundation is crucial for effective communication in English, covering tenses, parts of speech, and sentence construction.',
                            topics: [
                                'Parts of Speech',
                                'Tenses and Their Usage',
                                'Subject-Verb Agreement',
                                'Articles and Prepositions',
                                'Sentence Structure',
                                'Common Errors and Corrections'
                            ],
                            codeExample: `Grammar Rules in Practice:

Present Simple: 
- I work every day.
- She works in an office.

Present Continuous:
- I am working now.
- She is working on a project.

Present Perfect:
- I have worked here for 5 years.
- She has worked since morning.

Common Error Correction:
❌ "She don't like coffee."
✅ "She doesn't like coffee."`,
                            features: [
                                'Grammar mastery',
                                'Error correction',
                                'Sentence construction',
                                'Confident speaking',
                                'Writing improvement'
                            ]
                        }
                    }
                ],
                duration: '4 Weeks',
                level: 'Beginner'
            },
            'science-experiments': {
                title: 'Science Experiments',
                price: 'Free',
                description: 'Fun learning with practical experiments and demonstrations.',
                modules: [
                    {
                        name: 'Physics Experiments',
                        description: 'Hands-on physics experiments demonstrating fundamental principles.',
                        content: {
                            overview: 'Physics experiments help understand natural laws through practical demonstrations and observations.',
                            topics: [
                                'Laws of Motion',
                                'Light and Optics',
                                'Electricity and Magnetism',
                                'Sound and Waves',
                                'Heat and Thermodynamics',
                                'Simple Machines'
                            ],
                            codeExample: `Experiment: Newton's Third Law - Balloon Rocket

Materials:
- Balloon
- String
- Straw
- Tape

Procedure:
1. Thread string through straw
2. Tie string between two points
3. Inflate balloon and tape to straw
4. Release balloon - it moves forward!

Observation:
As air pushes backward from balloon, 
balloon moves forward (action-reaction).`,
                            features: [
                                'Hands-on learning',
                                'Concept visualization',
                                'Scientific method',
                                'Critical thinking',
                                'Fun activities'
                            ]
                        }
                    }
                ],
                duration: '6 Weeks',
                level: 'All Levels'
            },
            'graphic-design': {
                title: 'Graphic Design',
                price: '₹699',
                description: 'Learn Photoshop, Canva and design principles.',
                modules: [
                    {
                        name: 'Design Principles',
                        description: 'Master fundamental design principles for creating visually appealing graphics.',
                        content: {
                            overview: 'Understanding design principles is essential for creating balanced, harmonious, and effective visual compositions.',
                            topics: [
                                'Color Theory',
                                'Typography',
                                'Layout and Composition',
                                'Balance and Proportion',
                                'Contrast and Hierarchy',
                                'White Space Usage'
                            ],
                            codeExample: `Design Principles Checklist:

🎨 Color Theory:
- Complementary colors for contrast
- Analogous colors for harmony
- 60-30-10 rule for color distribution

📐 Layout:
- Rule of thirds for composition
- F-pattern for text reading
- Visual hierarchy for importance

✍️ Typography:
- Max 2-3 fonts per design
- Hierarchy through size/weight
- Readability over style`,
                            features: [
                                'Visual communication',
                                'Aesthetic sense',
                                'Professional standards',
                                'Creative thinking',
                                'Portfolio building'
                            ]
                        }
                    }
                ],
                duration: '5 Weeks',
                level: 'Beginner'
            },
            'mobile-app-development': {
                title: 'Mobile App Development',
                price: '₹899',
                description: 'Build Android & iOS apps with Flutter framework.',
                modules: [
                    {
                        name: 'Flutter Basics',
                        description: 'Learn Flutter framework fundamentals for cross-platform app development.',
                        content: {
                            overview: 'Flutter allows building beautiful, natively compiled applications for mobile, web, and desktop from a single codebase.',
                            topics: [
                                'Flutter Architecture',
                                'Dart Programming Basics',
                                'Widget Tree Concept',
                                'State Management',
                                'Layout Building',
                                'Hot Reload Feature'
                            ],
                            codeExample: `Basic Flutter App Structure:

import 'package:flutter/material.dart';

void main() {
  runApp(MyApp());
}

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      home: Scaffold(
        appBar: AppBar(
          title: Text('My First App'),
        ),
        body: Center(
          child: Text('Hello Flutter!'),
        ),
      ),
    );
  }
}`,
                            features: [
                                'Cross-platform development',
                                'Fast development cycle',
                                'Beautiful UI',
                                'Single codebase',
                                'Google-backed technology'
                            ]
                        }
                    }
                ],
                duration: '7 Weeks',
                level: 'Intermediate'
            },
            'data-science': {
                title: 'Data Science',
                price: '₹999',
                description: 'Python, Machine Learning, Data analysis complete course.',
                modules: [
                    {
                        name: 'Python for Data Science',
                        description: 'Learn Python programming specifically for data analysis and manipulation.',
                        content: {
                            overview: 'Python is the leading language for data science, offering powerful libraries for data manipulation, analysis, and visualization.',
                            topics: [
                                'NumPy for Numerical Computing',
                                'Pandas for Data Manipulation',
                                'Data Cleaning Techniques',
                                'Exploratory Data Analysis',
                                'Data Visualization',
                                'Statistical Analysis'
                            ],
                            codeExample: `Python Data Science Examples:

import pandas as pd
import numpy as np
import matplotlib.pyplot as plt

# Data loading
data = pd.read_csv('dataset.csv')

# Data cleaning
data = data.dropna()
data = data[data['age'] > 0]

# Basic analysis
print(data.describe())
print(data['salary'].mean())

# Visualization
plt.hist(data['age'])
plt.title('Age Distribution')
plt.show()`,
                            features: [
                                'Data manipulation skills',
                                'Statistical analysis',
                                'Visualization techniques',
                                'Real-world datasets',
                                'Industry-ready skills'
                            ]
                        }
                    }
                ],
                duration: '10 Weeks',
                level: 'Advanced'
            }
        };

        // ===== AUTHENTICATION SYSTEM =====
        const authSystem = {
            currentUser: null,
            users: JSON.parse(localStorage.getItem('courseUsers')) || [],

            signUp: function(name, email, password) {
                const existingUser = this.users.find(user => user.email === email);
                if (existingUser) {
                    return { success: false, message: 'User already exists with this email!' };
                }

                const newUser = {
                    id: Date.now().toString(),
                    name: name,
                    email: email,
                    password: password,
                    enrolledCourses: [],
                    progress: {},
                    joinDate: new Date().toLocaleDateString()
                };

                this.users.push(newUser);
                this.saveUsers();
                this.currentUser = newUser;
                
                return { success: true, message: 'Account created successfully!', user: newUser };
            },

            login: function(email, password) {
                const user = this.users.find(user => user.email === email && user.password === password);
                if (user) {
                    this.currentUser = user;
                    return { success: true, message: 'Login successful!', user: user };
                } else {
                    return { success: false, message: 'Invalid email or password!' };
                }
            },

            logout: function() {
                this.currentUser = null;
                this.updateAuthUI();
            },

            enrollInCourse: function(courseId) {
                if (!this.currentUser) {
                    this.showAuthModal('login');
                    return { success: false, message: 'Please login to enroll!' };
                }

                const course = coursesData[courseId];
                if (!course) {
                    return { success: false, message: 'Course not found!' };
                }

                if (this.currentUser.enrolledCourses.includes(courseId)) {
                    return { success: false, message: 'You are already enrolled in this course!' };
                }

                this.currentUser.enrolledCourses.push(courseId);
                this.currentUser.progress[courseId] = 0;
                
                const userIndex = this.users.findIndex(user => user.id === this.currentUser.id);
                if (userIndex !== -1) {
                    this.users[userIndex] = this.currentUser;
                    this.saveUsers();
                }

                return { 
                    success: true, 
                    message: `Successfully enrolled in ${course.title}!` 
                };
            },

            updateProgress: function(courseId, progress) {
                if (this.currentUser && this.currentUser.progress) {
                    this.currentUser.progress[courseId] = progress;
                    this.saveUsers();
                    updateProgressUI();
                }
            },

            saveUsers: function() {
                localStorage.setItem('courseUsers', JSON.stringify(this.users));
            },

            updateAuthUI: function() {
                const authSection = document.getElementById('authSection');
                const userSection = document.getElementById('userSection');
                const progressSection = document.getElementById('progressSection');
                const userNameSpan = document.getElementById('userName');
                const enrolledCoursesSpan = document.getElementById('enrolledCoursesCount');

                if (this.currentUser) {
                    if (authSection) authSection.style.display = 'none';
                    if (userSection) userSection.style.display = 'flex';
                    if (progressSection) progressSection.style.display = 'block';
                    if (userNameSpan) userNameSpan.textContent = this.currentUser.name;
                    if (enrolledCoursesSpan) enrolledCoursesSpan.textContent = this.currentUser.enrolledCourses.length;
                    
                    updateProgressUI();
                } else {
                    if (authSection) authSection.style.display = 'flex';
                    if (userSection) userSection.style.display = 'none';
                    if (progressSection) progressSection.style.display = 'none';
                }
            },

            showAuthModal: function(type = 'login') {
                const modalHTML = `
                    <div class="auth-modal-overlay">
                        <div class="auth-modal">
                            <div class="auth-modal-header">
                                <h2>${type === 'login' ? 'Login' : 'Sign Up'}</h2>
                                <span class="close-auth-btn" onclick="closeAuthModal()">×</span>
                            </div>
                            <div class="auth-modal-content">
                                <form id="authForm" onsubmit="handleAuthSubmit(event)">
                                    ${type === 'signup' ? `
                                        <div class="form-group">
                                            <label>Full Name</label>
                                            <input type="text" id="authName" required placeholder="Enter your full name">
                                        </div>
                                    ` : ''}
                                    
                                    <div class="form-group">
                                        <label>Email</label>
                                        <input type="email" id="authEmail" required placeholder="Enter your email">
                                    </div>
                                    
                                    <div class="form-group">
                                        <label>Password</label>
                                        <input type="password" id="authPassword" required placeholder="Enter your password">
                                    </div>
                                    
                                    <button type="submit" class="auth-submit-btn">
                                        ${type === 'login' ? 'Login' : 'Create Account'}
                                    </button>
                                </form>
                                
                                <div class="auth-switch">
                                    ${type === 'login' 
                                        ? 'Don\'t have an account? <a href="#" onclick="switchAuthType(\'signup\')">Sign up</a>' 
                                        : 'Already have an account? <a href="#" onclick="switchAuthType(\'login\')">Login</a>'
                                    }
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                
                document.body.insertAdjacentHTML('beforeend', modalHTML);
            }
        };

        // ===== NOTIFICATION SYSTEM =====
        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.innerHTML = `
                ${type === 'success' ? '✅' : type === 'error' ? '❌' : '⚠️'}
                ${message}
            `;
            
            const container = document.getElementById('notificationContainer');
            container.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideInRight 0.3s ease reverse';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        // ===== LOADING SYSTEM =====
        function showLoading() {
            document.getElementById('loadingSpinner').style.display = 'flex';
        }

        function hideLoading() {
            document.getElementById('loadingSpinner').style.display = 'none';
        }

        // ===== DARK MODE =====
        const darkModeToggle = document.getElementById('darkModeToggle');
        darkModeToggle.addEventListener('click', () => {
            document.body.classList.toggle('dark-mode');
            darkModeToggle.textContent = document.body.classList.contains('dark-mode') ? '☀️' : '🌙';
            localStorage.setItem('darkMode', document.body.classList.contains('dark-mode'));
            showNotification('Dark mode ' + (document.body.classList.contains('dark-mode') ? 'enabled' : 'disabled'));
        });

        // ===== SEARCH AND FILTERS =====
        function searchCourses() {
            const searchTerm = document.getElementById('courseSearch').value.toLowerCase();
            const courseCards = document.querySelectorAll('.course-card');
            let resultsFound = 0;
            
            courseCards.forEach(card => {
                const courseName = card.querySelector('h3').textContent.toLowerCase();
                const courseDesc = card.querySelector('p').textContent.toLowerCase();
                
                if (courseName.includes(searchTerm) || courseDesc.includes(searchTerm)) {
                    card.style.display = 'block';
                    card.style.animation = 'highlight 1s';
                    resultsFound++;
                } else {
                    card.style.display = 'none';
                }
            });
            
            if (searchTerm && resultsFound === 0) {
                showNotification('No courses found matching your search', 'warning');
            }
        }

        function filterCourses() {
            const levelFilter = document.getElementById('levelFilter').value;
            const priceFilter = document.getElementById('priceFilter').value;
            const durationFilter = document.getElementById('durationFilter').value;
            
            Object.keys(coursesData).forEach(courseId => {
                const course = coursesData[courseId];
                const courseElement = document.querySelector(`[onclick="showCourseDetails('${courseId}')"]`);
                if (!courseElement) return;
                
                const levelMatch = levelFilter === 'all' || course.level.toLowerCase().includes(levelFilter);
                const priceMatch = priceFilter === 'all' || 
                                  (priceFilter === 'free' && course.price === 'Free') ||
                                  (priceFilter === 'paid' && course.price !== 'Free');
                
                let durationMatch = true;
                if (durationFilter !== 'all') {
                    const weeks = parseInt(course.duration);
                    if (durationFilter === 'short') durationMatch = weeks <= 4;
                    else if (durationFilter === 'medium') durationMatch = weeks > 4 && weeks <= 8;
                    else if (durationFilter === 'long') durationMatch = weeks > 8;
                }
                
                if (levelMatch && priceMatch && durationMatch) {
                    courseElement.style.display = 'block';
                } else {
                    courseElement.style.display = 'none';
                }
            });
        }

        // ===== PROGRESS TRACKING =====
        function updateProgressUI() {
            if (!authSystem.currentUser) return;
            
            const progressContainer = document.getElementById('progressContainer');
            progressContainer.innerHTML = '';
            
            authSystem.currentUser.enrolledCourses.forEach(courseId => {
                const course = coursesData[courseId];
                const progress = authSystem.currentUser.progress?.[courseId] || 0;
                
                const progressHTML = `
                    <div class="progress-item">
                        <strong>${course.title}</strong>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${progress}%"></div>
                        </div>
                        <span>${progress}% Complete</span>
                        <button class="whatsapp-course-btn" onclick="shareProgress('${courseId}')" style="margin-top: 10px;">
                            📤 Share Progress
                        </button>
                    </div>
                `;
                progressContainer.innerHTML += progressHTML;
            });
        }

        function shareProgress(courseId) {
            const course = coursesData[courseId];
            const progress = authSystem.currentUser.progress?.[courseId] || 0;
            const message = `I've completed ${progress}% of "${course.title}" course on LearnMate! 🎓`;
            const whatsappURL = `https://wa.me/?text=${encodeURIComponent(message)}`;
            window.open(whatsappURL, '_blank');
        }

        // ===== COURSE MANAGEMENT =====
        function showCourseDetails(courseId) {
            const course = coursesData[courseId];
            
            const popupHTML = `
                <div class="course-popup-overlay">
                    <div class="course-popup">
                        <div class="popup-header">
                            <h2>${course.title}</h2>
                            <span class="close-btn" onclick="closeCoursePopup()">×</span>
                        </div>
                        <div class="popup-content">
                            <div class="course-info">
                                <p class="course-price-popup">${course.price}</p>
                                <p><strong>Duration:</strong> ${course.duration}</p>
                                <p><strong>Level:</strong> ${course.level}</p>
                            </div>
                            
                            <div class="course-description">
                                <h3>Course Description</h3>
                                <p>${course.description}</p>
                            </div>
                            
                            <div class="course-modules">
                                <h3>What You'll Learn</h3>
                                <ul>
                                    ${course.modules.map((module, index) => {
                                        return `<li onclick="showModuleDetail('${courseId}', ${index})" style="cursor: pointer; padding: 12px; border-radius: 8px; margin: 8px 0; transition: background 0.3s; border-left: 3px solid #007bff;" onmouseover="this.style.background='#f0f8ff'" onmouseout="this.style.background='transparent'">
                                            <strong>✅ ${module.name}</strong><br>
                                            <small>${module.description}</small>
                                        </li>`;
                                    }).join('')}
                                </ul>
                            </div>

                            <div class="rating-section">
                                <h4>Rate this course:</h4>
                                <div class="stars" onclick="rateCourse('${courseId}', event)">
                                    <span>⭐</span><span>⭐</span><span>⭐</span><span>⭐</span><span>⭐</span>
                                </div>
                            </div>
                            
                            <div class="popup-actions">
                                <button class="enroll-btn-popup" onclick="enrollInCourse('${courseId}')">
                                    ${authSystem.currentUser && authSystem.currentUser.enrolledCourses.includes(courseId) 
                                        ? '🎓 Already Enrolled' 
                                        : `Enroll Now - ${course.price}`
                                    }
                                </button>
                                <button class="whatsapp-course-btn" onclick="contactAboutCourse('${courseId}')">
                                    💬 Enquire on WhatsApp
                                </button>
                                <button class="close-btn-popup" onclick="closeCoursePopup()">Close</button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.insertAdjacentHTML('beforeend', popupHTML);
            trackEvent('course_view', 'view_details', courseId);
        }

        function closeCoursePopup() {
            const popup = document.querySelector('.course-popup-overlay');
            if (popup) {
                popup.remove();
            }
        }

        function showModuleDetail(courseId, moduleIndex) {
            const course = coursesData[courseId];
            const module = course.modules[moduleIndex];
            
            const moduleHTML = `
                <div class="module-popup-overlay">
                    <div class="module-popup">
                        <div class="module-header">
                            <h2>${module.name}</h2>
                            <button class="close-module-btn" onclick="closeModulePopup()">×</button>
                        </div>
                        <div class="module-content">
                            <div class="module-section">
                                <h3>📖 Overview</h3>
                                <p>${module.content.overview}</p>
                            </div>
                            
                            <div class="module-section">
                                <h3>📚 Topics Covered</h3>
                                <ul>
                                    ${module.content.topics.map(topic => `<li>🎯 ${topic}</li>`).join('')}
                                </ul>
                            </div>
                            
                            <div class="module-section">
                                <h3>✨ Key Features</h3>
                                <div class="module-features">
                                    ${module.content.features.map(feature => `
                                        <div class="feature-item">
                                            <strong>${feature}</strong>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                            
                            <div class="module-section">
                                <h3>💻 Practical Example</h3>
                                <pre class="code-example">${module.content.codeExample}</pre>
                            </div>
                            
                            ${moduleIndex < course.modules.length - 1 ? `
                                <button class="next-module-btn" onclick="showModuleDetail('${courseId}', ${moduleIndex + 1})">
                                    ➡️ Next Module: ${course.modules[moduleIndex + 1].name}
                                </button>
                            ` : `
                                <button class="next-module-btn" onclick="completeModule('${courseId}', ${moduleIndex})">
                                    ✅ Mark as Complete
                                </button>
                            `}
                        </div>
                    </div>
                </div>
            `;
            
            document.body.insertAdjacentHTML('beforeend', moduleHTML);
            trackEvent('module_view', 'view_content', `${courseId}_${moduleIndex}`);
        }

        function closeModulePopup() {
            const popup = document.querySelector('.module-popup-overlay');
            if (popup) {
                popup.remove();
            }
        }

        function completeModule(courseId, moduleIndex) {
            if (authSystem.currentUser) {
                const totalModules = coursesData[courseId].modules.length;
                const progress = Math.round(((moduleIndex + 1) / totalModules) * 100);
                authSystem.updateProgress(courseId, progress);
                showNotification(`Module completed! Progress: ${progress}%`);
                closeModulePopup();
            }
        }

        function enrollInCourse(courseId) {
            const result = authSystem.enrollInCourse(courseId);
            if (result.success) {
                showNotification(result.message);
                closeCoursePopup();
                authSystem.updateAuthUI();
                trackEvent('enrollment', 'enroll_course', courseId);
            } else {
                showNotification(result.message, 'error');
            }
        }

        function rateCourse(courseId, event) {
            if (!authSystem.currentUser) {
                showAuthModal('login');
                return;
            }
            
            const stars = event.currentTarget.querySelectorAll('span');
            const clickedStar = event.target;
            const rating = Array.from(stars).indexOf(clickedStar) + 1;
            
            stars.forEach((star, index) => {
                star.style.color = index < rating ? '#ffc107' : '#ccc';
            });
            
            showNotification(`Thanks for your ${rating}-star rating!`);
            trackEvent('rating', 'rate_course', `${courseId}_${rating}stars`);
        }

        function contactAboutCourse(courseId) {
            const course = coursesData[courseId];
            const message = `Hi, I'm interested in the "${course.title}" course. Can you provide more details about the curriculum and enrollment process?`;
            const whatsappURL = `https://wa.me/918960002095?text=${encodeURIComponent(message)}`;
            window.open(whatsappURL, '_blank');
            trackEvent('contact', 'whatsapp_enquiry', courseId);
        }

        // ===== AUTH MODAL FUNCTIONS =====
        function closeAuthModal() {
            const modal = document.querySelector('.auth-modal-overlay');
            if (modal) {
                modal.remove();
            }
        }

        function switchAuthType(type) {
            closeAuthModal();
            authSystem.showAuthModal(type);
        }

        function handleAuthSubmit(event) {
            event.preventDefault();
            showLoading();
            
            const form = event.target;
            const isLogin = form.querySelector('#authName') === null;
            
            const name = isLogin ? null : document.getElementById('authName').value;
            const email = document.getElementById('authEmail').value;
            const password = document.getElementById('authPassword').value;
            
            setTimeout(() => {
                let result;
                if (isLogin) {
                    result = authSystem.login(email, password);
                } else {
                    result = authSystem.signUp(name, email, password);
                }
                
                if (result.success) {
                    showNotification(result.message);
                    closeAuthModal();
                    authSystem.updateAuthUI();
                    trackEvent('auth', isLogin ? 'login' : 'signup', 'success');
                } else {
                    showNotification(result.message, 'error');
                    trackEvent('auth', isLogin ? 'login' : 'signup', 'failed');
                }
                hideLoading();
            }, 1000);
        }

        // ===== PWA INSTALL PROMPT =====
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            document.getElementById('installBtn').style.display = 'block';
        });

        document.getElementById('installBtn').addEventListener('click', () => {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                deferredPrompt.userChoice.then(() => {
                    document.getElementById('installBtn').style.display = 'none';
                });
            }
        });

        // ===== ANALYTICS =====
        function trackEvent(category, action, label) {
            // Simple analytics tracking
            const analytics = JSON.parse(localStorage.getItem('analytics')) || [];
            analytics.push({
                timestamp: new Date().toISOString(),
                category,
                action,
                label
            });
            localStorage.setItem('analytics', JSON.stringify(analytics));
        }

        // ===== INITIALIZATION =====
        function initializeCourses() {
            const courseGrid = document.getElementById('courseGrid');
            courseGrid.innerHTML = '';
            
            Object.keys(coursesData).forEach(courseId => {
                const course = coursesData[courseId];
                const courseHTML = `
                    <div class="course-card" onclick="showCourseDetails('${courseId}')">
                        <h3>${course.title}</h3>
                        <p>${course.description}</p>
                        <div class="course-meta">
                            <span class="duration">⏱️ ${course.duration}</span>
                            <span class="level">🎯 ${course.level}</span>
                        </div>
                        <span class="price">${course.price}</span>
                        <button class="whatsapp-course-btn" onclick="event.stopPropagation(); contactAboutCourse('${courseId}')">
                            💬 Enquire
                        </button>
                    </div>
                `;
                courseGrid.innerHTML += courseHTML;
            });
        }

        function scrollToCourses() {
            document.getElementById('courses').scrollIntoView({ 
                behavior: 'smooth' 
            });
        }

        function logout() {
            authSystem.logout();
            showNotification('Logged out successfully!');
            setTimeout(() => {
                window.location.reload();
            }, 1000);
        }

        // ===== EVENT LISTENERS =====
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize dark mode
            if (localStorage.getItem('darkMode') === 'true') {
                document.body.classList.add('dark-mode');
                darkModeToggle.textContent = '☀️';
            }
            
            // Initialize auth
            authSystem.updateAuthUI();
            initializeCourses();
            
            // Initialize MateBot
            mateBot.init();
            
            // Contact form
            const contactForm = document.querySelector('.contact-form');
            if (contactForm) {
                contactForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    showLoading();
                    
                    const name = this.querySelector('input[type="text"]').value;
                    const email = this.querySelector('input[type="email"]').value;
                    const message = this.querySelector('textarea').value;
                    
                    setTimeout(() => {
                        if (name && email && message) {
                            showNotification('Thank you for your message! We will contact you soon.');
                            this.reset();
                            trackEvent('contact', 'submit_form', 'success');
                        } else {
                            showNotification('Please fill all fields.', 'error');
                        }
                        hideLoading();
                    }, 1000);
                });
            }

            // Smooth scrolling
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });

            // Search on Enter key
            document.getElementById('courseSearch').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    searchCourses();
                }
            });

            showNotification('Welcome to LearnMate! 🎓', 'success');
            trackEvent('page', 'load', 'homepage');
        });
    </script>
</body>
</html>
